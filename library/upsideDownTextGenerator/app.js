var flipTable = {
  "\u2557": "\u255a",
  "\u2554": "\u255d",
  "\u255a": "\u2557",
  "\u255d": "\u2554",
  "\u2566": "\u2569",
  "\u2569": "\u2566",
  "\u2560": "\u2563",
  "\u2563": "\u2560",
  "\u2570": "\u256e",
  "\u256f": "\u256d",
  "\u256e": "\u2570",
  "\u256d": "\u256f",
  "\u2517": "\u2513",
  "\u251b": "\u250f",
  "\u2513": "\u2517",
  "\u250f": "\u251b",
  "\u2533": "\u253b",
  "\u253b": "\u2533",
  "\u2523": "\u252b",
  "\u252b": "\u2523",
  "\u2585": "\u2580",
  "\u2584": "\u2580",
  "\u2580": "\u2585",
  "\u2598": "\u2597",
  "\u2597": "\u2598",
  "\u259d": "\u2596",
  "\u2596": "\u259d",
  "\u25d7": "\u25d6",
  "\u25d6": "\u25d7",
  "\u2770": "\u2771",
  a: "\u0250",
  b: "q",
  c: "\u0254",
  d: "p",
  e: "\u01dd",
  f: "\u214e",
  g: "\u0183",
  h: "\u0265",
  i: "\u1d09",
  j: "\u027e",
  k: "\u029e",
  l: "\u0285",
  m: "\u026f",
  n: "u",
  o: "o",
  p: "d",
  q: "b",
  r: "\u0279",
  s: "s",
  t: "\u0287",
  u: "n",
  v: "\u028c",
  w: "\u028d",
  x: "x",
  y: "\u028e",
  z: "z",
  A: "\u2200",
  B: "\ua4ed",
  C: "\u03fd",
  D: "\u15e1",
  E: "\u018e",
  F: "\u15b5",
  G: "\u2141",
  H: "H",
  I: "I",
  J: "\u148b",
  K: "\ua4d8",
  L: "\u2142",
  M: "\ua7fd",
  N: "N",
  O: "O",
  P: "\u0500",
  Q: "\ua779",
  R: "\ua4e4",
  S: "S",
  T: "\ua4d5",
  U: "\u0548",
  V: "\u0245",
  W: "\u03fa",
  X: "X",
  Y: "\u2144",
  Z: "Z",
  "\n": "\n",
  "\u03b1": "\u0252",
  "\u03b2": "\u029a",
  "\u03b3": "\u2144",
  "\u03b4": "\u018d",
  "\ud835\udeff": "\u018d",
  "\u03c1": "\u146f",
  "\u03ba": "\ud834\ude32",
  "\u03bd": "\u028c",
  "\u03bb": "\ud800\udf16",
  "\u03b5": "\u025c",
  "\u03bc": "\u0e1f",
  "\u03be": "\u163c",
  "\u03b8": "\u03b8",
  "\u03bf": "\u03bf",
  "\u03b9": "\u03b9",
  "\u03c7": "\u03c7",
  "\u03c0": "\uffd2",
  "\u03b6": "z",
  "\u03b7": "\u056f",
  "\u03c5": "\ud834\ude45",
  "\u03c6": "\u0278",
  "\u03c8": "\u16e6",
  "\u03c4": "\ud834\ude1c",
  "\u03c9": "\u10dd",
  "\u0391": "\u2200",
  "\u0392": "\ua4ed",
  "\u0393": "\u2143",
  "\u0414": "\u10e9",
  "\u0395": "\u018e",
  "\u0394": "\u2207",
  "\u03a0": "\u2d61",
  "\u03a5": "\u2144",
  "\u039a": "\ua4d8",
  "\u039b": "V",
  "\u039c": "\ua7fd",
  "\u03a1": "\u0500",
  "\u03a7": "\u03a7",
  "\u03a6": "\u03a6",
  "\u0396": "\u0396",
  "\u0399": "\u0399",
  "\u039e": "\u039e",
  "\u039d": "\u039d",
  "\u039f": "\u039f",
  "\u0397": "\u0397",
  "\u0398": "\u0398",
  "\u03a3": "\u1552",
  "\u03a8": "\u22d4",
  "\u03a9": "\u01b1",
  "\u0410": "\u2200",
  "\u0411": "\u0726",
  "\u0431": "\u0726",
  "\u0412": "\ua4ed",
  "\u0413": "\u2143",
  "\u0421": "\u03fd",
  "\u0415": "\u018e",
  "\u041f": "\u2d61",
  "\u0423": "\u028e",
  "\u0422": "\ua4d5",
  "\u041a": "\ua4d8",
  "\u041b": "\u0474",
  "\u041c": "\ua7fd",
  "\u0420": "\u0500",
  "\u0425": "\u03a7",
  "\u0424": "\u0424",
  "\u0406": "\u0406",
  "\u041d": "\u041d",
  "\u041e": "\u041e",
  "\u0427": "\u10b9",
  "\u042f": "\u1589",
  "\u042e": "\ua654",
  "\u0433": "\u2143",
  "\u0447": "h",
  "\u0418": "\u0418",
  "\u0438": "\u0438",
  "\u0426": "\u0149",
  "\u0446": "\u0149",
  "\u0443": "\u028e",
  "\u043b": "\u0475",
  "\u0444": "\u0444",
  "\u0430": "\u0250",
  "\u0432": "\u029a",
  "\u0441": "\u0254",
  "\u0435": "\u01dd",
  "\u0434": "\u10e9",
  "\u0436": "\u0436",
  "\u0416": "\u0416",
  "\u0456": "\u1d09",
  "\u0437": "\u0511",
  "\u0417": "\u0190",
  "\u043a": "\u029e",
  "\u043c": "\u1955",
  "\u043d": "\u043d",
  "\u043f": "\u2294",
  "\u043e": "o",
  "\u0440": "d",
  "\u0428": "\u15f0",
  "\u0448": "m",
  "\u0429": "\u15f0",
  "\u0449": "m",
  "\u0442": "\ua4d5",
  "\u0445": "\u0445",
  "\u0454": "\u044d",
  "\u0404": "\u042d",
  "\u044f": "\u0281",
  "\u042c": "\u146b",
  "\u044c": "\u09ed",
  "\u044e": "\ua655",
  "?": "\xbf",
  "!": "\xa1",
  "[": "]",
  "(": ")",
  "{": "}",
  "<": ">",
  '"': "\ufbbc",
  "\u201c": "\ufbbc",
  "\u201d": "\ufbbc",
  _: "\u203e",
  1: "\u21c2",
  2: "\u218a",
  3: "\u218b",
  4: "\u07e4",
  6: "9",
  7: "\ud835\ude13",
  "\u20ac": "\u2c05",
  "\u02bb": ",",
  "&": "\u214b",
  "'": "\u257b",
  "\u203f": "\u2040",
  "\u2045": "\u2046",
  "\u2234": "\u2235",
  "\u0300": "\u0316",
  "\u0301": "\u0317",
  "\u0302": "\u032c",
  "\u0342": "\u0330",
  "\u0303": "\u0330",
  "\u0304": "\u0331",
  "\u0306": "\u032f",
  "\u0307": "\u0323",
  "\u0308": "\u0324",
  "\u0309": "\u0328",
  "\u030a": "\u0325",
  "\u030b": "\u0348",
  "\u030e": "\u0348",
  "\u030f": "\u0348",
  "\u030c": "\u032d",
  "\u030d": "\u0329",
  "\u0311": "\u032e",
  "\u031b": "\u031c",
  "\u0327": "\u1dc7",
  "\u0357": "\u031c",
  "\u0485": "\u0339",
  "\u0486": "\u031c",
  "\xab": "\xbb",
};

// console.log(flipTable);
function convertChar(c) {
  if (c in flipTable) {
    // console.log(flipTable[c]);
    return flipTable[c];
  }
  return c;
}

function convertToUpsideDown() {
  var text = document.getElementById("upsideDownTextArea").value;
  // console.log(text);

  if (
    document.getElementById("upsideDown").checked == true &&
    document.getElementById("reverse").checked == true
  ) {
    var new_text = text.split("").map(convertChar).join("");
    reverse_string = new_text.split("").reverse().join("");
    document.getElementById("upsideDownTextAreaResult").value = reverse_string;
  } else if (
    document.getElementById("upsideDown").checked == true &&
    document.getElementById("reverse").checked == false
  ) {
    var new_text = text.split("").map(convertChar).join("");
    document.getElementById("upsideDownTextAreaResult").value = new_text;
  } else if (
    document.getElementById("upsideDown").checked == false &&
    document.getElementById("reverse").checked == true
  ) {
    reverse_string = text.split("").reverse().join("");
    document.getElementById("upsideDownTextAreaResult").value = reverse_string;
  } else {
    document.getElementById("upsideDownTextAreaResult").value = text;
  }
  document.getElementById("copyButton").innerHTML = "Copy";
}

function clearUpsideDown() {
  document.getElementById("upsideDownTextArea").value = "";
  document.getElementById("upsideDownTextAreaResult").value = "";
}

function downloadFileUpsideDown() {
  var textFile = null,
    makeTextFile = function (text) {
      var data = new Blob([text], { type: "text/plain" });

      // If we are replacing a previously generated file we need to
      // manually revoke the object URL to avoid memory leaks.
      if (textFile !== null) {
        window.URL.revokeObjectURL(textFile);
      }

      textFile = window.URL.createObjectURL(data);

      return textFile;
    };
  var create = document.getElementById("create");
  var caseConverterTextArea = document.getElementById(
    "upsideDownTextAreaResult"
  );

  create.addEventListener(
    "click",
    function () {
      var link = document.createElement("a");
      link.setAttribute("download", "upsideDown.txt");
      link.href = makeTextFile(caseConverterTextArea.value);
      document.body.appendChild(link);
      // console.log('here');
      // wait for the link to be added to the document
      window.requestAnimationFrame(function () {
        var event = new MouseEvent("click");
        link.dispatchEvent(event);
        document.body.removeChild(link);
      });
    },
    false
  );
}

function copyFunctionUpsideDown() {
  document.querySelector("#upsideDownTextAreaResult").select();
  // console.log(document.querySelector("textarea"));
  document.execCommand("copy");
  document.getElementById("copyButton").innerHTML = "Copied";
}
